<input id="picker" type="file" />
<input id="scale" type="text" />
<canvas id="temp" style="display: none;"></canvas>
<img id="result" />
<script>try{
picker.addEventListener("change",function(event){
	alert();
	const file=event.target.files[0];
	if(!file.type.match(/^image\/(png|jpeg|gif)$/))
		return;
	const image=new Image();
	const reader=new FileReader();
	reader.addEventListener("load",function(event){
		image.addEventListener("load",function(){
			temp.height=image.height/parseInt(scale.value);
			temp.width=image.width/parseInt(scale.value);
			temp.getContext("2d").drawImage(image,0,0,temp.width,temp.height);
			result.src=temp.toDataURL();
		},false);
		image.src=event.target.result;
	},false);
	reader.readAsDataURL(file);
},false);
}catch(e){alert(e);}
</script>